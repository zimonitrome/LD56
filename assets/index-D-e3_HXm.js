(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function s(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerPolicy&&(r.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?r.credentials="include":i.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(i){if(i.ep)return;i.ep=!0;const r=s(i);fetch(i.href,r)}})();const Qe=(t,e)=>t===e,F=Symbol("solid-proxy"),be=Symbol("solid-track"),le={equals:Qe};let Le=Fe;const R=1,ae=2,Ie={owned:null,cleanups:null,context:null,owner:null};var S=null;let ge=null,Je=null,b=null,P=null,T=null,me=0;function ne(t,e){const s=b,n=S,i=t.length===0,r=e===void 0?n:e,o=i?Ie:{owned:null,cleanups:null,context:r?r.context:null,owner:r},l=i?t:()=>t(()=>N(()=>W(o)));S=o,b=null;try{return K(l,!0)}finally{b=s,S=n}}function B(t,e){e=e?Object.assign({},le,e):le;const s={value:t,observers:null,observerSlots:null,comparator:e.equals||void 0},n=i=>(typeof i=="function"&&(i=i(s.value)),Ve(s,i));return[Re.bind(s),n]}function L(t,e,s){const n=Me(t,e,!1,R);J(n)}function V(t,e,s){Le=nt;const n=Me(t,e,!1,R);n.user=!0,T?T.push(n):J(n)}function U(t,e,s){s=s?Object.assign({},le,s):le;const n=Me(t,e,!0,0);return n.observers=null,n.observerSlots=null,n.comparator=s.equals||void 0,J(n),Re.bind(n)}function et(t){return K(t,!1)}function N(t){if(b===null)return t();const e=b;b=null;try{return t()}finally{b=e}}function ve(t){return S===null||(S.cleanups===null?S.cleanups=[t]:S.cleanups.push(t)),t}function Se(){return b}function Re(){if(this.sources&&this.state)if(this.state===R)J(this);else{const t=P;P=null,K(()=>he(this),!1),P=t}if(b){const t=this.observers?this.observers.length:0;b.sources?(b.sources.push(this),b.sourceSlots.push(t)):(b.sources=[this],b.sourceSlots=[t]),this.observers?(this.observers.push(b),this.observerSlots.push(b.sources.length-1)):(this.observers=[b],this.observerSlots=[b.sources.length-1])}return this.value}function Ve(t,e,s){let n=t.value;return(!t.comparator||!t.comparator(n,e))&&(t.value=e,t.observers&&t.observers.length&&K(()=>{for(let i=0;i<t.observers.length;i+=1){const r=t.observers[i],o=ge&&ge.running;o&&ge.disposed.has(r),(o?!r.tState:!r.state)&&(r.pure?P.push(r):T.push(r),r.observers&&Ne(r)),o||(r.state=R)}if(P.length>1e6)throw P=[],new Error},!1)),e}function J(t){if(!t.fn)return;W(t);const e=me;tt(t,t.value,e)}function tt(t,e,s){let n;const i=S,r=b;b=S=t;try{n=t.fn(e)}catch(o){return t.pure&&(t.state=R,t.owned&&t.owned.forEach(W),t.owned=null),t.updatedAt=s+1,Xe(o)}finally{b=r,S=i}(!t.updatedAt||t.updatedAt<=s)&&(t.updatedAt!=null&&"observers"in t?Ve(t,n):t.value=n,t.updatedAt=s)}function Me(t,e,s,n=R,i){const r={fn:t,state:n,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:e,owner:S,context:S?S.context:null,pure:s};return S===null||S!==Ie&&(S.owned?S.owned.push(r):S.owned=[r]),r}function ce(t){if(t.state===0)return;if(t.state===ae)return he(t);if(t.suspense&&N(t.suspense.inFallback))return t.suspense.effects.push(t);const e=[t];for(;(t=t.owner)&&(!t.updatedAt||t.updatedAt<me);)t.state&&e.push(t);for(let s=e.length-1;s>=0;s--)if(t=e[s],t.state===R)J(t);else if(t.state===ae){const n=P;P=null,K(()=>he(t,e[0]),!1),P=n}}function K(t,e){if(P)return t();let s=!1;e||(P=[]),T?s=!0:T=[],me++;try{const n=t();return st(s),n}catch(n){s||(T=null),P=null,Xe(n)}}function st(t){if(P&&(Fe(P),P=null),t)return;const e=T;T=null,e.length&&K(()=>Le(e),!1)}function Fe(t){for(let e=0;e<t.length;e++)ce(t[e])}function nt(t){let e,s=0;for(e=0;e<t.length;e++){const n=t[e];n.user?t[s++]=n:ce(n)}for(e=0;e<s;e++)ce(t[e])}function he(t,e){t.state=0;for(let s=0;s<t.sources.length;s+=1){const n=t.sources[s];if(n.sources){const i=n.state;i===R?n!==e&&(!n.updatedAt||n.updatedAt<me)&&ce(n):i===ae&&he(n,e)}}}function Ne(t){for(let e=0;e<t.observers.length;e+=1){const s=t.observers[e];s.state||(s.state=ae,s.pure?P.push(s):T.push(s),s.observers&&Ne(s))}}function W(t){let e;if(t.sources)for(;t.sources.length;){const s=t.sources.pop(),n=t.sourceSlots.pop(),i=s.observers;if(i&&i.length){const r=i.pop(),o=s.observerSlots.pop();n<i.length&&(r.sourceSlots[o]=n,i[n]=r,s.observerSlots[n]=o)}}if(t.tOwned){for(e=t.tOwned.length-1;e>=0;e--)W(t.tOwned[e]);delete t.tOwned}if(t.owned){for(e=t.owned.length-1;e>=0;e--)W(t.owned[e]);t.owned=null}if(t.cleanups){for(e=t.cleanups.length-1;e>=0;e--)t.cleanups[e]();t.cleanups=null}t.state=0}function it(t){return t instanceof Error?t:new Error(typeof t=="string"?t:"Unknown error",{cause:t})}function Xe(t,e=S){throw it(t)}const rt=Symbol("fallback");function Ee(t){for(let e=0;e<t.length;e++)t[e]()}function ot(t,e,s={}){let n=[],i=[],r=[],o=0,l=e.length>1?[]:null;return ve(()=>Ee(r)),()=>{let a=t()||[],h=a.length,u,c;return a[be],N(()=>{let f,m,x,A,y,v,$,g,k;if(h===0)o!==0&&(Ee(r),r=[],n=[],i=[],o=0,l&&(l=[])),s.fallback&&(n=[rt],i[0]=ne(E=>(r[0]=E,s.fallback())),o=1);else if(o===0){for(i=new Array(h),c=0;c<h;c++)n[c]=a[c],i[c]=ne(d);o=h}else{for(x=new Array(h),A=new Array(h),l&&(y=new Array(h)),v=0,$=Math.min(o,h);v<$&&n[v]===a[v];v++);for($=o-1,g=h-1;$>=v&&g>=v&&n[$]===a[g];$--,g--)x[g]=i[$],A[g]=r[$],l&&(y[g]=l[$]);for(f=new Map,m=new Array(g+1),c=g;c>=v;c--)k=a[c],u=f.get(k),m[c]=u===void 0?-1:u,f.set(k,c);for(u=v;u<=$;u++)k=n[u],c=f.get(k),c!==void 0&&c!==-1?(x[c]=i[u],A[c]=r[u],l&&(y[c]=l[u]),c=m[c],f.set(k,c)):r[u]();for(c=v;c<h;c++)c in x?(i[c]=x[c],r[c]=A[c],l&&(l[c]=y[c],l[c](c))):i[c]=ne(d);i=i.slice(0,o=h),n=a.slice(0)}return i});function d(f){if(r[c]=f,l){const[m,x]=B(c);return l[c]=x,e(a[c],m)}return e(a[c])}}}function C(t,e){return N(()=>t(e||{}))}const lt=t=>`Stale read from <${t}>.`;function ie(t){const e="fallback"in t&&{fallback:()=>t.fallback};return U(ot(()=>t.each,t.children,e||void 0))}function re(t){const e=t.keyed,s=U(()=>t.when,void 0,{equals:(n,i)=>e?n===i:!n==!i});return U(()=>{const n=s();if(n){const i=t.children;return typeof i=="function"&&i.length>0?N(()=>i(e?n:()=>{if(!N(s))throw lt("Show");return t.when})):i}return t.fallback},void 0,void 0)}function at(t,e,s){let n=s.length,i=e.length,r=n,o=0,l=0,a=e[i-1].nextSibling,h=null;for(;o<i||l<r;){if(e[o]===s[l]){o++,l++;continue}for(;e[i-1]===s[r-1];)i--,r--;if(i===o){const u=r<n?l?s[l-1].nextSibling:s[r-l]:a;for(;l<r;)t.insertBefore(s[l++],u)}else if(r===l)for(;o<i;)(!h||!h.has(e[o]))&&e[o].remove(),o++;else if(e[o]===s[r-1]&&s[l]===e[i-1]){const u=e[--i].nextSibling;t.insertBefore(s[l++],e[o++].nextSibling),t.insertBefore(s[--r],u),e[i]=s[r]}else{if(!h){h=new Map;let c=l;for(;c<r;)h.set(s[c],c++)}const u=h.get(e[o]);if(u!=null)if(l<u&&u<r){let c=o,d=1,f;for(;++c<i&&c<r&&!((f=h.get(e[c]))==null||f!==u+d);)d++;if(d>u-l){const m=e[o];for(;l<u;)t.insertBefore(s[l++],m)}else t.replaceChild(s[l++],e[o++])}else o++;else e[o++].remove()}}}const ke="_$DX_DELEGATE";function ct(t,e,s,n={}){let i;return ne(r=>{i=r,e===document?t():p(e,t(),e.firstChild?null:void 0,s)},n.owner),()=>{i(),e.textContent=""}}function M(t,e,s){let n;const i=()=>{const o=document.createElement("template");return o.innerHTML=t,o.content.firstChild},r=()=>(n||(n=i())).cloneNode(!0);return r.cloneNode=r,r}function ze(t,e=window.document){const s=e[ke]||(e[ke]=new Set);for(let n=0,i=t.length;n<i;n++){const r=t[n];s.has(r)||(s.add(r),e.addEventListener(r,ht))}}function G(t,e,s){return N(()=>t(e,s))}function p(t,e,s,n){if(s!==void 0&&!n&&(n=[]),typeof e!="function")return ue(t,e,n,s);L(i=>ue(t,e(),i,s),n)}function ht(t){let e=t.target;const s=`$$${t.type}`,n=t.target,i=t.currentTarget,r=a=>Object.defineProperty(t,"target",{configurable:!0,value:a}),o=()=>{const a=e[s];if(a&&!e.disabled){const h=e[`${s}Data`];if(h!==void 0?a.call(e,h,t):a.call(e,t),t.cancelBubble)return}return e.host&&typeof e.host!="string"&&!e.host._$host&&e.contains(t.target)&&r(e.host),!0},l=()=>{for(;o()&&(e=e._$host||e.parentNode||e.host););};if(Object.defineProperty(t,"currentTarget",{configurable:!0,get(){return e||document}}),t.composedPath){const a=t.composedPath();r(a[0]);for(let h=0;h<a.length-2&&(e=a[h],!!o());h++){if(e._$host){e=e._$host,l();break}if(e.parentNode===i)break}}else l();r(n)}function ue(t,e,s,n,i){for(;typeof s=="function";)s=s();if(e===s)return s;const r=typeof e,o=n!==void 0;if(t=o&&s[0]&&s[0].parentNode||t,r==="string"||r==="number"){if(r==="number"&&(e=e.toString(),e===s))return s;if(o){let l=s[0];l&&l.nodeType===3?l.data!==e&&(l.data=e):l=document.createTextNode(e),s=X(t,s,n,l)}else s!==""&&typeof s=="string"?s=t.firstChild.data=e:s=t.textContent=e}else if(e==null||r==="boolean")s=X(t,s,n);else{if(r==="function")return L(()=>{let l=e();for(;typeof l=="function";)l=l();s=ue(t,l,s,n)}),()=>s;if(Array.isArray(e)){const l=[],a=s&&Array.isArray(s);if($e(l,e,s,i))return L(()=>s=ue(t,l,s,n,!0)),()=>s;if(l.length===0){if(s=X(t,s,n),o)return s}else a?s.length===0?_e(t,l,n):at(t,s,l):(s&&X(t),_e(t,l));s=l}else if(e.nodeType){if(Array.isArray(s)){if(o)return s=X(t,s,n,e);X(t,s,null,e)}else s==null||s===""||!t.firstChild?t.appendChild(e):t.replaceChild(e,t.firstChild);s=e}}return s}function $e(t,e,s,n){let i=!1;for(let r=0,o=e.length;r<o;r++){let l=e[r],a=s&&s[t.length],h;if(!(l==null||l===!0||l===!1))if((h=typeof l)=="object"&&l.nodeType)t.push(l);else if(Array.isArray(l))i=$e(t,l,a)||i;else if(h==="function")if(n){for(;typeof l=="function";)l=l();i=$e(t,Array.isArray(l)?l:[l],Array.isArray(a)?a:[a])||i}else t.push(l),i=!0;else{const u=String(l);a&&a.nodeType===3&&a.data===u?t.push(a):t.push(document.createTextNode(u))}}return i}function _e(t,e,s=null){for(let n=0,i=e.length;n<i;n++)t.insertBefore(e[n],s)}function X(t,e,s,n){if(s===void 0)return t.textContent="";const i=n||document.createTextNode("");if(e.length){let r=!1;for(let o=e.length-1;o>=0;o--){const l=e[o];if(i!==l){const a=l.parentNode===t;!r&&!o?a?t.replaceChild(i,l):t.insertBefore(i,s):a&&l.remove()}else r=!0}}else t.insertBefore(i,s);return[i]}function ut(t){const e=t.split(`
`),s={};let n=null,i=[];return e.forEach(r=>{r.startsWith("## ")?(n&&(s[n]=s[n]||[],i.length>0&&(s[n].push(i.join(`
`)),i=[])),n=r.slice(3).trim().toLowerCase()):r.trim()==="```"?i.length>0&&(s[n]=s[n]||[],s[n].push(i.join(`
`)),i=[]):n&&r.trim()!==""&&i.push(r)}),n&&i.length>0&&(s[n]=s[n]||[],s[n].push(i.join(`
`))),s}class ee{constructor(e,s=500){this.content=e,this.frameRate=s,this.loadSprites()}sprites={};currentFrames={};lastUpdateTime=0;animationId=null;lastRenderedSprite="";nFrames=0;async loadSprites(){try{this.sprites=ut(this.content),this.nFrames=Object.values(this.sprites).reduce((e,s)=>e+s.length,0),this.initializeCurrentFrames(),this.startAnimation()}catch(e){console.error("Failed to load sprites:",e)}}initializeCurrentFrames(){Object.keys(this.sprites).forEach(e=>{this.currentFrames[e]=0})}startAnimation(){this.lastUpdateTime=performance.now(),this.animationId=requestAnimationFrame(this.animate)}animate=e=>{e-this.lastUpdateTime>=this.frameRate&&(Object.keys(this.sprites).forEach(s=>{const n=this.sprites[s];n.length>1&&(this.currentFrames[s]=(this.currentFrames[s]+1)%n.length)}),this.lastUpdateTime=e),this.animationId=requestAnimationFrame(this.animate)};stopAnimation(){this.animationId!==null&&(cancelAnimationFrame(this.animationId),this.animationId=null)}render(e,s,n,i,r){const o=this.sprites[e]||[];if(o.length===0)return":/";const l=this.currentFrames[e]||0,a=o[l];return s&&this.lastRenderedSprite!==a&&(s.innerHTML=a,this.lastRenderedSprite=a),n&&typeof i=="number"&&typeof r=="number"&&(n.style.transform=`translate(calc(${i}px - 50%), calc(${r}px - 50%))`),a}setFrameRate(e){if(e<=0)throw new Error("Frame rate must be a positive number");this.frameRate=e}getFrameRate(){return this.frameRate}cleanup(){this.stopAnimation()}}const ft="## idle\n```\n(o o)\n L L\n```\n\n## walking\n```\n(o o)\n └ L\n```\n```\n(o o)\n L └\n```\n\n## damage\n```\n(= =)\n └ └\n```\n\n",dt="/LD56/assets/background-music-C9DM71VL.mp3",yt="/LD56/assets/hit-OEw8NPUl.mp3",pt="/LD56/assets/shoot-DvSQsqTL.mp3";class z{static instance;backgroundMusic=null;soundEffects=new Map;backgroundMusicVolume=1;soundEffectsVolume=1;constructor(){}static getInstance(){return z.instance||(z.instance=new z),z.instance}loadAllSounds(){this.loadBackgroundMusic(dt),this.loadSoundEffect("playerHit",yt,.5),this.loadSoundEffect("enemyShoot",pt,.5)}loadBackgroundMusic(e,s=1){const n=new Audio(e);n.loop=!0,this.backgroundMusic={audio:n,baseVolume:s},this.updateBackgroundMusicVolume()}playBackgroundMusic(){this.backgroundMusic?.audio.play()}stopBackgroundMusic(){this.backgroundMusic&&(this.backgroundMusic.audio.pause(),this.backgroundMusic.audio.currentTime=0)}loadSoundEffect(e,s,n=1){const i=new Audio(s);this.soundEffects.set(e,{audio:i,baseVolume:n}),this.updateSoundEffectVolume(e)}playSoundEffect(e){const s=this.soundEffects.get(e);s&&(s.audio.currentTime=0,s.audio.play())}setBackgroundMusicVolume(e){this.backgroundMusicVolume=Math.max(0,Math.min(1,e)),this.updateBackgroundMusicVolume()}setSoundEffectsVolume(e){this.soundEffectsVolume=Math.max(0,Math.min(1,e)),this.updateAllSoundEffectsVolumes()}updateBackgroundMusicVolume(){this.backgroundMusic&&(this.backgroundMusic.audio.volume=this.backgroundMusic.baseVolume*this.backgroundMusicVolume)}updateSoundEffectVolume(e){const s=this.soundEffects.get(e);s&&(s.audio.volume=s.baseVolume*this.soundEffectsVolume)}updateAllSoundEffectsVolumes(){this.soundEffects.forEach((e,s)=>this.updateSoundEffectVolume(s))}getBackgroundMusicVolume(){return this.backgroundMusicVolume}getSoundEffectsVolume(){return this.soundEffectsVolume}}const D=z.getInstance();var mt=M("<div id=player><pre>");class gt{x;y;size;color;speed;velocityX=0;velocityY=0;maxVelocity;acceleration;friction;sprite=null;state="idle";keys=new Set;ref;divRef;lastDirection=1;graceCooldown=0;world=null;constructor(e,s,n,i,r){this.x=e,this.y=s,this.size=n,this.color=i,this.speed=r,this.maxVelocity=r,this.acceleration=r/5,this.friction=.9,this.sprite=new ee(ft),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleKeyUp=this.handleKeyUp.bind(this),window.addEventListener("keydown",this.handleKeyDown),window.addEventListener("keyup",this.handleKeyUp)}handleKeyDown(e){this.keys.add(e.key.toLowerCase())}handleKeyUp(e){this.keys.delete(e.key.toLowerCase())}update(){let e=0,s=0;w.health>0&&(this.keys.has("w")&&(s-=1),this.keys.has("s")&&(s+=1),this.keys.has("a")&&(e-=1),this.keys.has("d")&&(e+=1));const n=e!==0||s!==0?1:0;this.velocityX+=e*this.acceleration,this.velocityY+=s*this.acceleration;let i=Math.sqrt(this.velocityX**2+this.velocityY**2);if(i>this.maxVelocity){const o=this.maxVelocity/i;this.velocityX*=o,this.velocityY*=o}if(i=Math.sqrt(this.velocityX**2+this.velocityY**2),this.velocityX*=this.friction,this.velocityY*=this.friction,this.x+=this.velocityX,this.y+=this.velocityY,this.x=Math.max(0,Math.min(_,this.x)),this.y=Math.max(0,Math.min(_,this.y)),i<.01&&(this.velocityX=0,this.velocityY=0),this.graceCooldown>0){this.graceCooldown-=1,this.state="damage";let o=this.oscillatingDecay(30-this.graceCooldown),l=this.oscillatingDecay(.8*(30-this.graceCooldown));this.ref.style.rotate=`${2*o}deg`,this.world=document.getElementById("world"),this.world.style.left=`calc(50% + ${.5*o}px)`,this.world.style.top=`calc(50% + ${.2*l}px)`}else this.ref.style.rotate="0deg",n?this.state="walking":this.state="idle";const r=Math.max(Math.floor(5*Math.exp(i/14)),1);this.sprite?.setFrameRate(r),this.lastDirection=e===0?this.lastDirection:e,this.ref.style.transform=`scaleX(${this.lastDirection})`,this.sprite.render(this.state,this.ref,this.divRef,this.x,this.y)}takeDamage(){this.graceCooldown>0||(D.playSoundEffect("playerHit"),this.state="damage",this.graceCooldown=30,I("health",w.health-1))}oscillatingDecay=e=>(30-e)*Math.sin(2*Math.PI*.1*e)*Math.exp(-.05*e);render(){const e=this;return(()=>{var s=mt(),n=s.firstChild,i=e.divRef;typeof i=="function"?G(i,s):e.divRef=s,s.style.setProperty("position","absolute"),s.style.setProperty("transform","translate(-50%, -50%)"),s.style.setProperty("border","none");var r=e.ref;return typeof r=="function"?G(r,n):e.ref=n,n.style.setProperty("margin","0"),s})()}cleanup(){this.sprite?.cleanup(),window.removeEventListener("keydown",this.handleKeyDown),window.removeEventListener("keyup",this.handleKeyUp)}}const xe=Symbol("store-raw"),j=Symbol("store-node"),O=Symbol("store-has"),je=Symbol("store-self");function Ye(t){let e=t[F];if(!e&&(Object.defineProperty(t,F,{value:e=new Proxy(t,vt)}),!Array.isArray(t))){const s=Object.keys(t),n=Object.getOwnPropertyDescriptors(t);for(let i=0,r=s.length;i<r;i++){const o=s[i];n[o].get&&Object.defineProperty(t,o,{enumerable:n[o].enumerable,get:n[o].get.bind(e)})}}return e}function fe(t){let e;return t!=null&&typeof t=="object"&&(t[F]||!(e=Object.getPrototypeOf(t))||e===Object.prototype||Array.isArray(t))}function Z(t,e=new Set){let s,n,i,r;if(s=t!=null&&t[xe])return s;if(!fe(t)||e.has(t))return t;if(Array.isArray(t)){Object.isFrozen(t)?t=t.slice(0):e.add(t);for(let o=0,l=t.length;o<l;o++)i=t[o],(n=Z(i,e))!==i&&(t[o]=n)}else{Object.isFrozen(t)?t=Object.assign({},t):e.add(t);const o=Object.keys(t),l=Object.getOwnPropertyDescriptors(t);for(let a=0,h=o.length;a<h;a++)r=o[a],!l[r].get&&(i=t[r],(n=Z(i,e))!==i&&(t[r]=n))}return t}function de(t,e){let s=t[e];return s||Object.defineProperty(t,e,{value:s=Object.create(null)}),s}function Q(t,e,s){if(t[e])return t[e];const[n,i]=B(s,{equals:!1,internal:!0});return n.$=i,t[e]=n}function wt(t,e){const s=Reflect.getOwnPropertyDescriptor(t,e);return!s||s.get||!s.configurable||e===F||e===j||(delete s.value,delete s.writable,s.get=()=>t[F][e]),s}function Ue(t){Se()&&Q(de(t,j),je)()}function bt(t){return Ue(t),Reflect.ownKeys(t)}const vt={get(t,e,s){if(e===xe)return t;if(e===F)return s;if(e===be)return Ue(t),s;const n=de(t,j),i=n[e];let r=i?i():t[e];if(e===j||e===O||e==="__proto__")return r;if(!i){const o=Object.getOwnPropertyDescriptor(t,e);Se()&&(typeof r!="function"||t.hasOwnProperty(e))&&!(o&&o.get)&&(r=Q(n,e,r)())}return fe(r)?Ye(r):r},has(t,e){return e===xe||e===F||e===be||e===j||e===O||e==="__proto__"?!0:(Se()&&Q(de(t,O),e)(),e in t)},set(){return!0},deleteProperty(){return!0},ownKeys:bt,getOwnPropertyDescriptor:wt};function ye(t,e,s,n=!1){if(!n&&t[e]===s)return;const i=t[e],r=t.length;s===void 0?(delete t[e],t[O]&&t[O][e]&&i!==void 0&&t[O][e].$()):(t[e]=s,t[O]&&t[O][e]&&i===void 0&&t[O][e].$());let o=de(t,j),l;if((l=Q(o,e,i))&&l.$(()=>s),Array.isArray(t)&&t.length!==r){for(let a=t.length;a<r;a++)(l=o[a])&&l.$();(l=Q(o,"length",r))&&l.$(t.length)}(l=o[je])&&l.$()}function Ke(t,e){const s=Object.keys(e);for(let n=0;n<s.length;n+=1){const i=s[n];ye(t,i,e[i])}}function St(t,e){if(typeof e=="function"&&(e=e(t)),e=Z(e),Array.isArray(e)){if(t===e)return;let s=0,n=e.length;for(;s<n;s++){const i=e[s];t[s]!==i&&ye(t,s,i)}ye(t,"length",n)}else Ke(t,e)}function q(t,e,s=[]){let n,i=t;if(e.length>1){n=e.shift();const o=typeof n,l=Array.isArray(t);if(Array.isArray(n)){for(let a=0;a<n.length;a++)q(t,[n[a]].concat(e),s);return}else if(l&&o==="function"){for(let a=0;a<t.length;a++)n(t[a],a)&&q(t,[a].concat(e),s);return}else if(l&&o==="object"){const{from:a=0,to:h=t.length-1,by:u=1}=n;for(let c=a;c<=h;c+=u)q(t,[c].concat(e),s);return}else if(e.length>1){q(t[n],e,[n].concat(s));return}i=t[n],s=[n].concat(s)}let r=e[0];typeof r=="function"&&(r=r(i,s),r===i)||n===void 0&&r==null||(r=Z(r),n===void 0||fe(i)&&fe(r)&&!Array.isArray(r)?Ke(i,r):ye(t,n,r))}function qe(...[t,e]){const s=Z(t||{}),n=Array.isArray(s),i=Ye(s);function r(...o){et(()=>{n&&o.length===1?St(s,o[0]):q(s,o)})}return[i,r]}const $t="# Villain Sprites\n\n## idle\n```\n-(ò_ó)-⟔\n  L L\n```\n\n## walking\n```\n-(ò_ó)-⟔\n  └ L\n```\n```\n-(ò_ó)-⟔\n  L └\n```\n\n## shooting\n```\n-(ò_ó)⟔ \n  L L\n```\n\n## damaged\n```\n-(x_x)-  ⟔\n  └ └\n```",xt="## main\n```\n+\n```\n```\n×\n```";class we{x;y;speed=5;size=.5;element;sprite;player;playerElement=null;constructor(e,s,n,i,r){this.player=n,this.playerElement=document.getElementById("player"),this.x=e,this.y=s,this.sprite=new ee(xt),this.sprite.setFrameRate(5);const o=i-e,l=r-s,a=Math.sqrt(o*o+l*l),h=o/a,u=l/a;this.element=document.createElement("pre"),this.element.style.position="absolute",this.element.style.width=`${this.size}rem`,this.element.style.height=`${this.size}rem`,this.element.style.margin="0",this.element.style.lineHeight="50%",this.element.style.borderRadius="50%",this.updatePosition();const c=document.getElementById("world");c?c.appendChild(this.element):console.error("World element not found"),this.update(h,u)}updatePosition(){this.sprite.render("main",this.element,this.element,this.x,this.y)}update(e,s){const n=setInterval(()=>{this.x+=e*this.speed,this.y+=s*this.speed,this.updatePosition(),this.isOutOfBounds()&&(this.destroy(),clearInterval(n)),this.checkCollision(this.player)&&(this.player.takeDamage(),this.destroy(),clearInterval(n))},16)}isOutOfBounds(){const s=this.element.getBoundingClientRect(),n=s.left+s.width/2,i=s.top+s.height/2;return n<-1e3||n>window.innerWidth+1e3||i<-1e3||i>window.innerHeight+1e3}checkCollision(e){const s=this.element.getBoundingClientRect();if(!this.playerElement)return console.error("Player element not found"),!1;const n=this.playerElement.getBoundingClientRect();return!(s.right<n.left||s.left>n.right||s.bottom<n.top||s.top>n.bottom)}destroy(){this.element.parentNode?.removeChild(this.element)}}var Pt=M("<div><pre>:)");class Ce{x;y;size=1;color="black";speed=1.4;velocityX=0;velocityY=0;maxVelocity;acceleration;friction;sprite;state="idle";ref;divRef;lastDirection=1;cooldown=0;wantedDistance=200;type="normal";cooldownPeriod=100;behaviorTimer=0;currentBehavior="chase";randomDirection={x:0,y:0};behaviorChangeProbability;constructor(e,s,n="normal",i=.01,r=1.4){this.x=e,this.y=s,this.friction=.9,this.type=n,this.behaviorChangeProbability=i,this.speed=r,this.type==="red"&&(this.size=2,this.speed=1.8,this.wantedDistance=400,this.behaviorChangeProbability=.005,this.cooldownPeriod=20),this.type==="blue"&&(this.wantedDistance=400,this.speed=.2),this.maxVelocity=this.speed,this.acceleration=this.speed/10,this.sprite=new ee($t),this.sprite.setFrameRate(5)}chooseBehavior(){if(Math.random()<this.behaviorChangeProbability){const e=["chase","wait","random"];if(this.currentBehavior=e[Math.floor(Math.random()*e.length)],this.behaviorTimer=Math.random()*1.5+.5,this.currentBehavior==="random"){const s=Math.random()*2*Math.PI;this.randomDirection={x:Math.cos(s),y:Math.sin(s)}}}}shoot(e){if(!this.divRef||!this.ref)return;const s=this.ref.getBoundingClientRect(),n=window.getComputedStyle(this.ref),i=parseFloat(n.fontSize),r=i*.6,o=i,l=this.x+this.lastDirection*(s.width/2+r/2),a=this.y-s.height/2+o/2;if(this.type==="blue"){const h=Math.atan2(e.y-a,e.x-l),u=Math.PI/12,c=h-u,d=h+u,f=l+Math.cos(c)*1e3,m=a+Math.sin(c)*1e3,x=l+Math.cos(d)*1e3,A=a+Math.sin(d)*1e3;new we(l,a,e,f,m),new we(l,a,e,x,A)}else new we(l,a,e,e.x,e.y);D.playSoundEffect("enemyShoot"),I("score",h=>h+1)}update(e,s){this.chooseBehavior(),this.behaviorTimer>0?this.behaviorTimer-=s:this.currentBehavior="chase";const n=e.x-this.x,i=e.y-this.y,r=Math.sqrt(n*n+i*i);let o=n/r,l=i/r;switch(this.currentBehavior){case"chase":r>this.wantedDistance&&(this.velocityX+=o*this.acceleration,this.velocityY+=l*this.acceleration);break;case"wait":o=0,l=0,this.velocityX*=.9,this.velocityY*=.9;break;case"random":this.velocityX+=this.randomDirection.x*this.acceleration,this.velocityY+=this.randomDirection.y*this.acceleration,o=this.randomDirection.x,l=this.randomDirection.y;break}r<=this.wantedDistance&&(this.type!=="red"&&(o=0,l=0),this.cooldown<=0&&(this.shoot(e),this.cooldown=this.cooldownPeriod)),this.cooldown-=1;let a=Math.sqrt(this.velocityX**2+this.velocityY**2);if(a>this.maxVelocity){const h=this.maxVelocity/a;this.velocityX*=h,this.velocityY*=h}a=Math.sqrt(this.velocityX**2+this.velocityY**2),this.velocityX*=this.friction,this.velocityY*=this.friction,this.cooldown<=0&&(this.x+=this.velocityX,this.y+=this.velocityY),a<.01&&(this.velocityX=0,this.velocityY=0),this.cooldown>this.cooldownPeriod*.8?this.state="shooting":o!==0||l!==0?this.state="walking":this.state="idle",this.lastDirection=o===0?this.lastDirection:Math.sign(o),this.ref&&(this.ref.style.transform=`scaleX(${this.lastDirection})`),this.sprite.render(this.state,this.ref,this.divRef,this.x,this.y)}render(){const e=this;return(()=>{var s=Pt(),n=s.firstChild,i=e.divRef;return typeof i=="function"?G(i,s):e.divRef=s,s.style.setProperty("position","absolute"),s.style.setProperty("border","none"),G(r=>e.ref=r,n),n.style.setProperty("margin","0"),L(r=>{var o=e.type==="normal"?"normal":"bold",l={normal:"black",red:"red",blue:"blue"}[e.type];return o!==r.e&&((r.e=o)!=null?n.style.setProperty("font-weight",o):n.style.removeProperty("font-weight")),l!==r.t&&((r.t=l)!=null?n.style.setProperty("color",l):n.style.removeProperty("color")),r},{e:void 0,t:void 0}),s})()}cleanup(){this.sprite.cleanup()}}const Mt=`## main
\`\`\`
 ___  ___
/   \\/   \\
\\        /
 \\      /
  \\    /
   \\  /
    \\/
\`\`\``;function Ae(t,e){if(t<2||e<2)return"Width and height must be at least 2.";const s="o"+"=".repeat(t-2)+"o",n="‖"+" ".repeat(t-2)+"‖";let i=s+`
`;for(let r=0;r<e-2;r++)i+=n+`
`;return i+=s,i}var Et=M("<div>"),kt=M("<p>Loading high scores..."),_t=M("<p style=color:red>"),Ct=M("<table><thead><tr><th>Rank</th><th>Name</th><th>Score</th><th>Date</th></tr></thead><tbody>"),At=M("<tr><td></td><td></td><td></td><td>");const[Dt,Ot]=B([]),[Tt,Pe]=B(!0),[De,Oe]=B(null),Bt="https://docs.google.com/spreadsheets/d/1y1-C_hKXzPTLQC4fDhsamvQC3xBRIXhR7czqJkNaWX0/gviz/tq?tqx=out:csv&sheet=scores",He=async()=>{Pe(!0),Oe(null);try{const t=await fetch(Bt);if(!t.ok)throw new Error("Failed to fetch scores");const e=await t.text(),s=Lt(e);Ot(s)}catch(t){Oe("Failed to load high scores. Please try again later."),console.error("Error fetching scores:",t)}finally{Pe(!1)}},Lt=t=>t.split(`
`).slice(1).map(s=>{const n=s.match(/(".*?"|[^",\s]+)(?=\s*,|\s*$)/g)||[],[i,r,o]=n.map(l=>l.replace(/^"|"$/g,"").trim());return{name:i,score:parseInt(r,10),timestamp:o}}).filter(s=>s.name&&!isNaN(s.score)).sort((s,n)=>n.score-s.score),It=()=>(V(()=>{He()}),(()=>{var t=Et();return t.style.setProperty("overflow-y","auto"),t.style.setProperty("width","calc(100% - 6rem)"),t.style.setProperty("flex","1 1 auto"),t.style.setProperty("text-align","center"),p(t,(()=>{var e=U(()=>!!Tt());return()=>e()?kt():(()=>{var s=U(()=>!!De());return()=>s()?(()=>{var n=_t();return p(n,De),n})():(()=>{var n=Ct(),i=n.firstChild,r=i.nextSibling;return n.style.setProperty("width","100%"),p(r,C(ie,{get each(){return Dt()},children:(o,l)=>(()=>{var a=At(),h=a.firstChild,u=h.nextSibling,c=u.nextSibling,d=c.nextSibling;return p(h,()=>l()+1),u.style.setProperty("white-space","nowrap"),u.style.setProperty("overflow","hidden"),u.style.setProperty("text-overflow","ellipsis"),u.style.setProperty("max-width","16ch"),p(u,()=>o.name),p(c,()=>o.score),p(d,()=>new Date(o.timestamp).toISOString().split("T")[0]),a})()})),n})()})()})()),t})());var Rt=M("<div><div><label>Background Music</label><input type=range min=0 max=1 step=0.01></div><div><label>Sound Effects</label><input type=range min=0 max=1 step=0.01>"),Vt=M('<div><button aria-label="Audio Settings">🔊');const Ft=()=>{const[t,e]=B(!1),s=()=>e(!t()),n=r=>{const o=parseFloat(r.target.value);Be("backgroundMusic",o),D.setBackgroundMusicVolume(o)},i=r=>{const o=parseFloat(r.target.value);Be("soundEffects",o),D.setSoundEffectsVolume(o)};return(()=>{var r=Vt(),o=r.firstChild;return r.style.setProperty("position","absolute"),r.style.setProperty("top","1rem"),r.style.setProperty("right","1rem"),r.style.setProperty("z-index","50"),r.style.setProperty("display","flex"),r.style.setProperty("gap","1rem"),p(r,C(re,{get when(){return t()},get children(){var l=Rt(),a=l.firstChild,h=a.firstChild,u=h.nextSibling,c=a.nextSibling,d=c.firstChild,f=d.nextSibling;return l.style.setProperty("background","white"),l.style.setProperty("padding","1rem"),l.style.setProperty("border-radius","0.5rem"),l.style.setProperty("box-shadow","0 2px 10px rgba(0,0,0,0.1)"),l.style.setProperty("margin-top","0.5rem"),a.style.setProperty("margin-bottom","1rem"),h.style.setProperty("display","block"),h.style.setProperty("font-size","0.875rem"),h.style.setProperty("font-weight","500"),h.style.setProperty("margin-bottom","0.5rem"),u.$$input=n,u.style.setProperty("width","100%"),d.style.setProperty("display","block"),d.style.setProperty("font-size","0.875rem"),d.style.setProperty("font-weight","500"),d.style.setProperty("margin-bottom","0.5rem"),f.$$input=i,f.style.setProperty("width","100%"),L(()=>u.value=pe.backgroundMusic),L(()=>f.value=pe.soundEffects),l}}),o),o.$$click=s,o.style.setProperty("padding","0.5rem"),o.style.setProperty("background","white"),o.style.setProperty("border","1px solid #ccc"),o.style.setProperty("border-radius","0.25rem"),o.style.setProperty("cursor","pointer"),o.style.setProperty("width","fit-content"),o.style.setProperty("height","fit-content"),r})()};ze(["input","click"]);const Nt="## 1\n```\n^^^ ^\n```\n\n## 2\n```\n^^\n```";var Xt=M("<div>"),zt=M("<div id=welcomeScreen><pre></pre><div id=welcome><h1>(o o)</h1><p>Play with W, A, S, D to move around.</p><p>Avoid enemies, and have fun!</p><button>Start Game"),Te=M("<pre>"),jt=M('<input type=text placeholder="Enter your name"id=playerName>'),Yt=M("<button>Submit score"),Ut=M("<div id=gameOver><h1>Game over!</h1><h2>Your score: </h2><div><button>Restart"),Kt=M("<div id=game><div id=world></div><div id=HUD><div id=gameOverScreen></div><div></div><div><h2>Score: ");const Y=1500;let _=Y;const We=new ee(Nt),qt=t=>(()=>{var e=Xt();return e.style.setProperty("position","absolute"),e.style.setProperty("font-weight","bold"),e.style.setProperty("color","rgb(200,200,200)"),p(e,()=>We.render(t.spriteIndex.toString())),L(s=>{var n=`${t.x}rem`,i=`${t.y}rem`;return n!==s.e&&((s.e=n)!=null?e.style.setProperty("left",n):e.style.removeProperty("left")),i!==s.t&&((s.t=i)!=null?e.style.setProperty("top",i):e.style.removeProperty("top")),s},{e:void 0,t:void 0}),e})(),Ht=async()=>{oe("loading");const e={name:document.getElementById("playerName").value,score:w.score};fetch("https://script.google.com/macros/s/AKfycbwZ1tT3EAPZgnxp1M91a5cv1AZAHCZYdC_Lym3-D9Gq6Ff5S8Xni8VKDyiLIxq2s-dIBg/exec",{redirect:"follow",method:"POST",headers:{"Content-Type":"text/plain;charset=utf-8",origin:"https://script.google.com"},body:JSON.stringify(e)}).then(s=>{oe(!0),Pe(!0),setTimeout(()=>{He()},1e3)}).catch(s=>{console.error("Error submitting score:",s),oe(!1)})},Ge=()=>({player:new gt(Y/2,Y/2,1,"red",7),enemies:[],tiles:[],health:3,active:!0,score:0,deltaTime:0});let H=0;function Wt(t,e=.01){return 1-1/(1+Math.exp(e*t)-1)}const te=()=>Wt(H),[w,I]=qe(Ge()),[se,oe]=B(!1),[pe,Be]=qe({backgroundMusic:.5,soundEffects:.3}),Gt=()=>{let t;const[e,s]=B({width:window.innerWidth,height:window.innerHeight}),[n,i]=B(!1),r=()=>{s({width:window.innerWidth,height:window.innerHeight})};V(()=>{window.addEventListener("resize",r),ve(()=>window.removeEventListener("resize",r))}),V(()=>{D.loadAllSounds()}),V(()=>{D.setBackgroundMusicVolume(pe.backgroundMusic),D.setSoundEffectsVolume(pe.soundEffects)}),V(()=>{t.style.visibility=n()?"visible":"hidden"}),V(()=>{w.active&&n()?D.playBackgroundMusic():D.stopBackgroundMusic()});const o=()=>{const h=[],u=parseFloat(getComputedStyle(document.documentElement).fontSize),c=Math.floor(Y/u),d=Math.floor(Y/u);for(let f=0;f<100;f++)h.push({x:Math.floor(Math.random()*c),y:Math.floor(Math.random()*d),sprite:1+Math.floor(Math.random()*We.nFrames)});return h},l=()=>{let h,u;switch(Math.floor(Math.random()*4)){case 0:h=Math.random()*_,u=0;break;case 1:h=_,u=Math.random()*_;break;case 2:h=Math.random()*_,u=_;break;case 3:h=0,u=Math.random()*_;break}const d=Math.random()<te(),f=d?Math.random()<.5?"red":"blue":"normal",m=Math.random()<.2?.05:.01;let x;d?x=new Ce(h,u,f,m):x=new Ce(h,u,f,m,1.4+.2*(Math.random()-.5)),I("enemies",A=>[...A,x])};V(()=>{if(!n())return;console.log("start"),I("tiles",o());let h=performance.now(),u=0;H=0,w.active;const c=setInterval(()=>{console.log(te());const d=performance.now(),f=(d-h)/1e3;h=d,w.player.update(),w.enemies.forEach(m=>{m.update(w.player,f)}),u+=f,u>=1&&(I("score",m=>m+1),H+=1,u-=1,H%(10-Math.floor(5*te()))===0&&(console.log(H,10-Math.floor(5*te()),"spawning enemy"),l())),t!==void 0&&(t.style.transform=`translate(${-w.player.x}px, ${-w.player.y}px)`),w.health<=0&&w.player.graceCooldown<=0&&(I("active",!1),clearInterval(c)),_-=f,t!==void 0&&(t.style.width=`${_}px`,t.style.height=`${_}px`)},1e3/60);return l(),ve(()=>{clearInterval(c)}),()=>{clearInterval(c)}});const a=()=>{i(!0),I("active",!0),o(),D.playBackgroundMusic()};return(()=>{var h=Kt(),u=h.firstChild,c=u.nextSibling,d=c.firstChild,f=d.nextSibling,m=f.nextSibling,x=m.firstChild;x.firstChild;var A=t;return typeof A=="function"?G(A,u):t=u,p(u,C(ie,{get each(){return w.tiles},children:y=>C(qt,{get x(){return y.x},get y(){return y.y},get spriteIndex(){return y.sprite},color:"rgba(100,100,200,0.2)"})}),null),p(u,C(ie,{get each(){return w.enemies},children:y=>y.render()}),null),p(u,()=>w.player.render(),null),p(c,C(Ft,{}),d),p(d,C(re,{get when(){return!n()},get children(){var y=zt(),v=y.firstChild,$=v.nextSibling,g=$.firstChild,k=g.nextSibling,E=k.nextSibling,Ze=E.nextSibling;return v.style.setProperty("margin","0"),p(v,()=>Ae(Math.floor(.6*e().width/(.56*parseFloat(getComputedStyle(document.documentElement).fontSize))),Math.floor(.6*e().height/(1.2*parseFloat(getComputedStyle(document.documentElement).fontSize))))),Ze.$$click=a,y}}),null),p(d,C(re,{get when(){return U(()=>!w.active)()&&n()},get children(){return[(()=>{var y=Te();return y.style.setProperty("margin","0"),p(y,()=>{const v=parseFloat(getComputedStyle(document.documentElement).fontSize),$=.56*v,g=1.2*v,k=Math.floor(.6*e().width/$),E=Math.floor(.6*e().height/g);return Ae(k,E)}),y})(),(()=>{var y=Ut(),v=y.firstChild,$=v.nextSibling;$.firstChild;var g=$.nextSibling,k=g.firstChild;return p($,()=>w.score,null),p(y,C(It,{}),g),g.style.setProperty("display","flex"),g.style.setProperty("flex-direction","row"),g.style.setProperty("gap","1rem"),g.style.setProperty("margin","1rem"),k.$$click=()=>{w.player.cleanup();for(const E of w.enemies)E.cleanup();I(Ge()),oe(!1),_=Y},p(g,C(re,{get when(){return!se()||se()==="loading"},get children(){return[(()=>{var E=jt();return L(()=>E.disabled=se()=="loading"),E})(),(()=>{var E=Yt();return E.$$click=Ht,L(()=>E.disabled=se()==="loading"),E})()]}}),null),y})()]}}),null),f.style.setProperty("bottom","0"),f.style.setProperty("left","0"),f.style.setProperty("position","absolute"),f.style.setProperty("display","flex"),f.style.setProperty("flex-direction","row"),f.style.setProperty("gap","1rem"),f.style.setProperty("margin","1rem"),p(f,C(ie,{get each(){return Array.from({length:w.health})},children:()=>(()=>{var y=Te();return y.style.setProperty("font-weight","bold"),p(y,()=>new ee(Mt).render("main")),y})()})),m.style.setProperty("top","0"),m.style.setProperty("left","0"),m.style.setProperty("position","absolute"),m.style.setProperty("margin-left","2rem"),p(x,()=>w.score,null),h})()};ct(()=>C(Gt,{}),document.getElementById("root"));ze(["click"]);
